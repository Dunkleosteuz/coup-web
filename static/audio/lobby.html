<!-- Lobby Background Music (Ambient/Calm)
     This is a data-URL embedded audio file - a subtle ambient tone for lobby
     You can replace this with actual MP3/WAV files in deployment
-->
<!doctype html>
<html>
  <body>
    <script>
      // Generate and download a simple ambient audio for lobby
      // Using Web Audio API to create a 10-second ambient loop
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const sampleRate = audioContext.sampleRate;
      const duration = 10; // 10 seconds
      const buffer = audioContext.createBuffer(1, sampleRate * duration, sampleRate);
      const data = buffer.getChannelData(0);

      // Create ambient drone sound
      for (let i = 0; i < data.length; i++) {
        // Oscillator at 55 Hz (A1 note) with fade in/out
        const t = i / sampleRate;
        const fadeIn = Math.min(1, t / 1);
        const fadeOut = Math.max(0, 1 - Math.max(0, t - 8) / 2);

        // Multiple sine waves for harmonic richness
        data[i] = (Math.sin(2 * Math.PI * 55 * t) * 0.3 + Math.sin(2 * Math.PI * 110 * t) * 0.2 + Math.sin(2 * Math.PI * 55 * t * 1.5) * 0.15) * fadeIn * fadeOut * 0.3;
      }

      // Encode to WAV
      function encodeWAV(samples, sampleRate) {
        let offset = 0;
        let position = 0;
        const frames = samples.length;
        const isFloat = samples instanceof Float32Array;
        const dataLength = frames * 2;
        const buffer = new ArrayBuffer(44 + dataLength);
        const view = new DataView(buffer);

        const writeString = (offset, string) => {
          for (let i = 0; i < string.length; i++) {
            view.setUint8(offset + i, string.charCodeAt(i));
          }
        };

        writeString(0, "RIFF");
        view.setUint32(4, 36 + dataLength, true);
        writeString(8, "WAVE");
        writeString(12, "fmt ");
        view.setUint32(16, 16, true);
        view.setUint16(20, 1, true);
        view.setUint16(22, 1, true);
        view.setUint32(24, sampleRate, true);
        view.setUint32(28, sampleRate * 2, true);
        view.setUint16(32, 2, true);
        view.setUint16(34, 16, true);
        writeString(36, "data");
        view.setUint32(40, dataLength, true);

        let index = 44;
        for (let i = 0; i < frames; i++) {
          view.setInt16(index, isFloat ? (samples[i] < 0 ? samples[i] * 0x8000 : samples[i] * 0x7fff) : samples[i], true);
          index += 2;
        }

        return buffer;
      }

      const wav = encodeWAV(data, sampleRate);
      const blob = new Blob([wav], { type: "audio/wav" });
      const url = URL.createObjectURL(blob);

      // Create download link
      const a = document.createElement("a");
      a.href = url;
      a.download = "lobby.wav";
      a.click();
    </script>
  </body>
</html>
